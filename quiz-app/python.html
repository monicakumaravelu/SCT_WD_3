<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Python Quiz</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="quiz-container" id="quizBox">
    <h1>Python Programming Quiz</h1>

    <!-- Question counter -->
    <div id="questionCounter">Question 1 of 10</div>

    <!-- Progress bar -->
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="question-box">
      <h2 id="question">Question text</h2>
      <ul class="options" id="optionsList"></ul>
    </div>

    <div class="btn-container">
      <button id="nextBtn">Next</button>
      <button id="finishBtn" style="display:none;">Finish</button>
    </div>
  </div>

<script>
const quizData = [
  { question: "Which of the following is used to define a block of code in Python?", options: ["Braces {}", "Indentation", "Parentheses ()", "Square brackets []"], correct: "Indentation" },
  { question: "What will be the output of the following code?\nx = [1, 2, 3, 4]\nprint(x[::-1])", options: ["[4, 3, 2, 1]", "[1, 2, 3, 4]", "[1, 4, 3, 2]", "Error"], correct: "[4, 3, 2, 1]" },
  { question: "Which of the following is a mutable data type in Python?", options: ["tuple", "list", "string", "int"], correct: "list" },
  { question: "How do you create a Python function?", options: ["function myFunc():", "def myFunc():", "func myFunc():", "create myFunc():"], correct: "def myFunc():" },
  { question: "Which operator is used for exponentiation in Python?", options: ["^", "**", "%", "//"], correct: "**" },
  { question: "What will the following code output? print(7 // 3)", options: ["2", "2.33", "3", "1"], correct: "2" },
  { question: "Which keyword is used for loops in Python?", options: ["for", "loop", "repeat", "foreach"], correct: "for" },
  { question: "Which of the following is NOT a Python data type?", options: ["set", "dict", "char", "list"], correct: "char" },
  { question: "What is the correct way to import the math module?", options: ["import math", "include math", "using math", "require math"], correct: "import math" },
  { question: "Which function can be used to get input from the user in Python?", options: ["input()", "scanf()", "read()", "get()"], correct: "input()" }
];

let currentQuestion = 0;
let score = 0;
let userAnswers = [];

const questionEl = document.getElementById("question");
const optionsList = document.getElementById("optionsList");
const nextBtn = document.getElementById("nextBtn");
const finishBtn = document.getElementById("finishBtn");
const progressBar = document.getElementById("progressBar");
const questionCounter = document.getElementById("questionCounter");

// Load question and options
function loadQuestion() {
  const q = quizData[currentQuestion];
  questionEl.textContent = q.question;
  optionsList.innerHTML = "";
  q.options.forEach(opt => {
    const li = document.createElement("li");
    li.innerHTML = `<label><input type="radio" name="option" value="${opt}"> ${opt}</label>`;
    optionsList.appendChild(li);
  });
  updateProgress(currentQuestion, quizData.length);
}

// Get selected answer
function getSelected() {
  const options = document.getElementsByName("option");
  for (let opt of options) {
    if (opt.checked) return opt.value;
  }
  return null;
}

// Update progress bar and question counter
function updateProgress(currentIndex, totalQuestions) {
  const percent = ((currentIndex + 1) / totalQuestions) * 100;
  progressBar.style.width = percent + "%";
  questionCounter.textContent = `Question ${currentIndex + 1} of ${totalQuestions}`;
}

// Next button click
nextBtn.addEventListener("click", () => {
  const answer = getSelected();
  if (!answer) {
    alert("Please select an option!");
    return;
  }
  userAnswers.push({question: quizData[currentQuestion].question, selected: answer, correct: quizData[currentQuestion].correct});
  if (answer === quizData[currentQuestion].correct) score++;

  currentQuestion++;
  if (currentQuestion < quizData.length) {
    loadQuestion();
    if (currentQuestion === quizData.length - 1) {
      nextBtn.style.display = "none";
      finishBtn.style.display = "inline-block";
    }
  }
});

// Finish button click
finishBtn.addEventListener("click", () => {
  const username = localStorage.getItem("username") || "Anonymous";

  // Save to leaderboard
  const scoreData = {
    name: username,
    score: score,
    total: quizData.length,
    topic: "Python"
  };
  
  let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
  leaderboard.push(scoreData);
  leaderboard.sort((a,b) => b.score - a.score);
  localStorage.setItem("leaderboard", JSON.stringify(leaderboard));

  // Store for result page
  localStorage.setItem("score", score);
  localStorage.setItem("total", quizData.length);
  localStorage.setItem("answers", JSON.stringify(userAnswers));

  window.location.href = "result.html";
});

// Initialize first question
loadQuestion();
</script>
</body>
</html>
