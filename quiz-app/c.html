<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>C Quiz</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="quiz-container" id="quizBox">
    <h1>C Programming Quiz</h1>

    <!-- Question counter -->
    <div id="questionCounter">Question 1 of 10</div>

    <!-- Progress bar -->
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="question-box">
      <h2 id="question">Question text</h2>
      <ul class="options" id="optionsList"></ul>
    </div>

    <div class="btn-container">
      <button id="nextBtn">Next</button>
      <button id="finishBtn" style="display:none;">Finish</button>
    </div>
  </div>

<script>
const quizData = [
  { question: "Which of the following is the correct syntax to declare an integer variable in C?", options: ["int var;", "integer var;", "var int;", "var integer;"], correct: "int var;" },
  { question: "Which symbol is used to terminate a statement in C?", options: [":", ".", ";", ","], correct: ";" },
  { question: "What is the correct way to write a main function in C?", options: ["void main()", "int main()", "main()", "function main()"], correct: "int main()" },
  { question: "Which of the following is a correct comment in C?", options: ["/* This is a comment */", "# This is a comment", "// This is a comment", "-- This is a comment"], correct: "/* This is a comment */" },
  { question: "Which operator is used for the modulus (remainder) operation in C?", options: ["%", "#", "&", "*"], correct: "%" },
  { question: "What is the output of printf('%d', 5 / 2); in C?", options: ["2.5", "2", "3", "0"], correct: "2" },
  { question: "Which of the following is used to read input from the user in C?", options: ["scanf()", "printf()", "read()", "input()"], correct: "scanf()" },
  { question: "Which of the following is NOT a valid C data type?", options: ["int", "float", "boolean", "char"], correct: "boolean" },
  { question: "What will the following code print? int x = 10; printf('%d', ++x);", options: ["9", "10", "11", "0"], correct: "11" },
  { question: "Which function is used to terminate a program in C?", options: ["exit()", "stop()", "terminate()", "break()"], correct: "exit()" }
];

let currentQuestion = 0;
let score = 0;
let userAnswers = [];

const questionEl = document.getElementById("question");
const optionsList = document.getElementById("optionsList");
const nextBtn = document.getElementById("nextBtn");
const finishBtn = document.getElementById("finishBtn");
const progressBar = document.getElementById("progressBar");
const questionCounter = document.getElementById("questionCounter");

// Load question and options
function loadQuestion() {
  const q = quizData[currentQuestion];
  questionEl.textContent = q.question;
  optionsList.innerHTML = "";
  q.options.forEach(opt => {
    const li = document.createElement("li");
    li.innerHTML = `<label><input type="radio" name="option" value="${opt}"> ${opt}</label>`;
    optionsList.appendChild(li);
  });
  updateProgress(currentQuestion, quizData.length);
}

// Get selected answer
function getSelected() {
  const options = document.getElementsByName("option");
  for (let opt of options) {
    if (opt.checked) return opt.value;
  }
  return null;
}

// Update progress bar and question counter
function updateProgress(currentIndex, totalQuestions) {
  const percent = ((currentIndex + 1) / totalQuestions) * 100;
  progressBar.style.width = percent + "%";
  questionCounter.textContent = `Question ${currentIndex + 1} of ${totalQuestions}`;
}

// Next button click
nextBtn.addEventListener("click", () => {
  const answer = getSelected();
  if (!answer) {
    alert("Please select an option!");
    return;
  }
  userAnswers.push({question: quizData[currentQuestion].question, selected: answer, correct: quizData[currentQuestion].correct});
  if (answer === quizData[currentQuestion].correct) score++;

  currentQuestion++;
  if (currentQuestion < quizData.length) {
    loadQuestion();
    if (currentQuestion === quizData.length - 1) {
      nextBtn.style.display = "none";
      finishBtn.style.display = "inline-block";
    }
  }
});

// Finish button click
finishBtn.addEventListener("click", () => {
  const username = localStorage.getItem("username") || "Anonymous";

  // Save to leaderboard
  const scoreData = {
    name: username,
    score: score,
    total: quizData.length,
    topic: "C"
  };
  
  let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
  leaderboard.push(scoreData);
  leaderboard.sort((a,b) => b.score - a.score);
  localStorage.setItem("leaderboard", JSON.stringify(leaderboard));

  // Store for result page
  localStorage.setItem("score", score);
  localStorage.setItem("total", quizData.length);
  localStorage.setItem("answers", JSON.stringify(userAnswers));

  window.location.href = "result.html";
});

// Initialize first question
loadQuestion();
</script>
</body>
</html>
